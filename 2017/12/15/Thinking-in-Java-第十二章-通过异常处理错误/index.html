<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    <title>Thinking in Java 第十二章 通过异常处理错误 | Quincey | mind in mind</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="ThinkingInJava">
    <meta name="description" content="12.1 概念 如果使用异常，就不必再方法调用处进行检查，因为异常机制将保证能够捕获这个错误；而只需要在某个地方处理错误，即“异常处理程序”。 异常处理把“描述在正常执行过程中做什么事”和“出了问题怎么办”的代码相分离  12.2 基本异常 异常代码执行过程： 使用new在堆上创建一个异常对象 当前的执行路径被终止，并且从当前环境中弹出对异常对象的引用 异常处理机制接管程序   异常处理的目的：将">
<meta name="keywords" content="ThinkingInJava">
<meta property="og:type" content="article">
<meta property="og:title" content="Thinking in Java 第十二章 通过异常处理错误">
<meta property="og:url" content="http://matlabchina.cn/2017/12/15/Thinking-in-Java-第十二章-通过异常处理错误/index.html">
<meta property="og:site_name" content="Quincey">
<meta property="og:description" content="12.1 概念 如果使用异常，就不必再方法调用处进行检查，因为异常机制将保证能够捕获这个错误；而只需要在某个地方处理错误，即“异常处理程序”。 异常处理把“描述在正常执行过程中做什么事”和“出了问题怎么办”的代码相分离  12.2 基本异常 异常代码执行过程： 使用new在堆上创建一个异常对象 当前的执行路径被终止，并且从当前环境中弹出对异常对象的引用 异常处理机制接管程序   异常处理的目的：将">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://ozv461xxi.bkt.clouddn.com/ThinkInJava-ch12.8-1.PNG">
<meta property="og:image" content="http://ozv461xxi.bkt.clouddn.com/ThinkInJava-ch12.8-2.PNG">
<meta property="og:image" content="http://ozv461xxi.bkt.clouddn.com/ThinkInJava-ch12.10-1.PNG">
<meta property="og:image" content="http://ozv461xxi.bkt.clouddn.com/ThinkInJava-ch12.10-2.PNG">
<meta property="og:image" content="http://ozv461xxi.bkt.clouddn.com/ThinkInJava-ch12.13-1.PNG">
<meta property="og:updated_time" content="2017-12-17T09:12:40.094Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Thinking in Java 第十二章 通过异常处理错误">
<meta name="twitter:description" content="12.1 概念 如果使用异常，就不必再方法调用处进行检查，因为异常机制将保证能够捕获这个错误；而只需要在某个地方处理错误，即“异常处理程序”。 异常处理把“描述在正常执行过程中做什么事”和“出了问题怎么办”的代码相分离  12.2 基本异常 异常代码执行过程： 使用new在堆上创建一个异常对象 当前的执行路径被终止，并且从当前环境中弹出对异常对象的引用 异常处理机制接管程序   异常处理的目的：将">
<meta name="twitter:image" content="http://ozv461xxi.bkt.clouddn.com/ThinkInJava-ch12.8-1.PNG">
    
        <link rel="alternate" type="application/atom+xml" title="Quincey" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/logo.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Quincey Svng</h5>
          <a href="mailto:salsa2010@foxmail.com" title="salsa2010@foxmail.com" class="mail">salsa2010@foxmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                Quincey Svng
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/SuperFireFoxy" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://www.weibo.com/salsa2010" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://www.facebook.com/felix.song.79" target="_blank" >
                <i class="icon icon-lg icon-link"></i>
                facebook
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Thinking in Java 第十二章 通过异常处理错误</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">Thinking in Java 第十二章 通过异常处理错误</h1>
        <h5 class="subtitle">
            
                <time datetime="2017-12-15T05:52:56.000Z" itemprop="datePublished" class="page-time">
  2017-12-15
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/ThinkingInJava/">ThinkingInJava</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#12-1-概念"><span class="post-toc-number">1.</span> <span class="post-toc-text">12.1 概念</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#12-2-基本异常"><span class="post-toc-number">2.</span> <span class="post-toc-text">12.2 基本异常</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#12-3-捕获异常"><span class="post-toc-number">3.</span> <span class="post-toc-text">12.3 捕获异常</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#12-4-创建自定义异常"><span class="post-toc-number">4.</span> <span class="post-toc-text">12.4 创建自定义异常</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#12-5-异常说明"><span class="post-toc-number">5.</span> <span class="post-toc-text">12.5 异常说明</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#11-6-捕获所有异常"><span class="post-toc-number">6.</span> <span class="post-toc-text">11.6 捕获所有异常</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#12-7-Java标准异常"><span class="post-toc-number">7.</span> <span class="post-toc-text">12.7 Java标准异常</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#12-8-使用finally进行处理"><span class="post-toc-number">8.</span> <span class="post-toc-text">12.8 使用finally进行处理</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#12-9-异常的限制"><span class="post-toc-number">9.</span> <span class="post-toc-text">12.9 异常的限制</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#12-10-构造器"><span class="post-toc-number">10.</span> <span class="post-toc-text">12.10 构造器</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#12-11-异常捕获"><span class="post-toc-number">11.</span> <span class="post-toc-text">12.11 异常捕获</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#12-12-其他可选方式"><span class="post-toc-number">12.</span> <span class="post-toc-text">12.12 其他可选方式</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#12-13-异常使用指南"><span class="post-toc-number">13.</span> <span class="post-toc-text">12.13 异常使用指南</span></a></li></ol>
        </nav>
    </aside>
    
<article id="post-Thinking-in-Java-第十二章-通过异常处理错误"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Thinking in Java 第十二章 通过异常处理错误</h1>
        <div class="post-meta">
            <time class="post-time" title="2017-12-15 13:52:56" datetime="2017-12-15T05:52:56.000Z"  itemprop="datePublished">2017-12-15</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/ThinkingInJava/">ThinkingInJava</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h2 id="12-1-概念"><a href="#12-1-概念" class="headerlink" title="12.1 概念"></a>12.1 概念</h2><ol>
<li>如果使用异常，就不必再方法调用处进行检查，因为异常机制将保证能够捕获这个错误；而只需要在某个地方处理错误，即“异常处理程序”。</li>
<li>异常处理把“描述在正常执行过程中做什么事”和“出了问题怎么办”的代码相分离</li>
</ol>
<h2 id="12-2-基本异常"><a href="#12-2-基本异常" class="headerlink" title="12.2 基本异常"></a>12.2 基本异常</h2><ol>
<li>异常代码执行过程：<ul>
<li>使用new在堆上创建一个异常对象</li>
<li>当前的执行路径被终止，并且从当前环境中弹出对异常对象的引用</li>
<li>异常处理机制接管程序</li>
</ul>
</li>
<li>异常处理的目的：将程序从错误状态中恢复出来，恢复到一个稳定执行的点上。</li>
<li><p>异常参数：所有的标准异常类都带有两个构造器：</p>
<ul>
<li>一个默认构造器</li>
<li>一个接受字符串作为参数，以便能把相关信息放入异常对象的构造器。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NoSuchMethodException</span> </span></span><br><span class="line"><span class="class"><span class="keyword">extends</span> <span class="title">ReflectiveOperationException</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">5034388446362600923L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Constructs a &lt;code&gt;NoSuchMethodException&lt;/code&gt; without a detail message.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">NoSuchMethodException</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Constructs a &lt;code&gt;NoSuchMethodException&lt;/code&gt; with a detail message.</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span>      s   the detail message.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">NoSuchMethodException</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>异常返回的“地点”与函数返回的“地点”有所不同：</p>
<ul>
<li>函数返回点就是函数调用处</li>
<li><strong>异常的返回点必须要到一个“异常处理点”，这个位置可能离异常被抛出的地方跨越了方法调用栈的许多层次异常抛出时穿过的这个层次，都会被终止执行</strong></li>
</ul>
</li>
</ol>
<h2 id="12-3-捕获异常"><a href="#12-3-捕获异常" class="headerlink" title="12.3 捕获异常"></a>12.3 捕获异常</h2><ol>
<li><p>异常处理程序：</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> TimeoutException(<span class="string">"hello"</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (<span class="keyword">final</span> TimeoutException ex) &#123;</span><br><span class="line">        ex.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (<span class="keyword">final</span> NullPointerException ex) &#123;</span><br><span class="line">        ex.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (<span class="keyword">final</span> Exception e) &#123;</span><br><span class="line">        ex.printStackTrace();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>终止与恢复：</p>
<ul>
<li><p>异常处理一般有两种处理模型</p>
<ul>
<li><p>终止模型：错误非常关键，以至于程序无法返回正常状态。此时，一旦抛出异常，就立马终止该被try的代码块</p>
</li>
<li><p>恢复模型：在异常处理程序中修正错误，然后尝试从新调用该方法</p>
<p>  把try放在while循环里，这样就不断的进如try块，进行修正恢复</p>
<blockquote>
<p>推荐使用终止模型的原因：恢复性的处理程序需要了解异常抛出的地点，这势必要包含依赖于抛出位置的非通用性代码，这导致了代码编写和维护的难度，对于异常可能会从血多地方抛出的大型程序来说，更是如此。</p>
</blockquote>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="12-4-创建自定义异常"><a href="#12-4-创建自定义异常" class="headerlink" title="12.4 创建自定义异常"></a>12.4 创建自定义异常</h2><ol>
<li><p>创建异常:</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> MyException extends Exception&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyException</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyException</span><span class="params">(String msg)</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>System.error</code>将错误发送到<em>标准错误流</em>，它不会随着<code>System.out</code>一起被重定向</p>
</li>
<li>对于异常类来说，<code>getMessage</code>方法类似于<code>toString</code>方法</li>
</ol>
<h2 id="12-5-异常说明"><a href="#12-5-异常说明" class="headerlink" title="12.5 异常说明"></a>12.5 异常说明</h2><ol>
<li><p>异常说明使用了附加的关键字<code>throws</code>，后面接一个所有潜在异常类型的列表</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">f</span><span class="params">()</span> <span class="keyword">throws</span> TooBig, TooSmall</span>&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>告诉客户端程序员，该方法所有可能抛出的异常</li>
<li>在使用该方法时，编译器就会提示你：<ul>
<li>要么处理该异常</li>
<li>要么在调用的函数的异常说明中表明此方法将产生异常</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="11-6-捕获所有异常"><a href="#11-6-捕获所有异常" class="headerlink" title="11.6 捕获所有异常"></a>11.6 捕获所有异常</h2><ol>
<li><p>常用异常类方法</p>
<p> 获取异常信息：</p>
<ul>
<li><code>getMessage()</code>:获取详细信息</li>
<li><p><code>getLocalizedMessage()</code>:获取本地语言表示的详细信息</p>
</li>
<li><p><code>toString()</code>:返回对<code>Throwable</code>的简单描述</p>
<p>输出到流：</p>
</li>
<li><code>printStackTrace()</code>:输出到标准错误流</li>
<li><code>printStackTrace(PrintStream)</code>:输出到PrintStream流</li>
<li><p><code>printStackTrace(java.io.PrintWriter)</code>:输出到PrintWriter流</p>
<p>记录异常栈帧信息</p>
</li>
<li><p><code>Throwable fillInStackTrace()</code>:用于在Throwable对象内部记录栈帧的当前状态</p>
<p>从Object继承的方法：</p>
</li>
<li><code>getClass</code>:返回此类的另一个新对象</li>
<li><code>getName</code>：查询这个Class对象包含的包名称</li>
<li><code>getSimpleName()</code>:</li>
</ul>
</li>
<li><p>栈轨迹</p>
<ul>
<li><code>printStackTrace()</code>所提供的所有信息可以通过<code>getStackTrace()</code>获得</li>
</ul>
</li>
<li><p>重新抛出异常</p>
<ul>
<li>重新抛出异常会把异常抛给上一级环境中的异常处理程序，同一个try块后续的catch子句将被忽略</li>
<li>重新抛出异常时：<ul>
<li>如果只是把当前异常对象抛出的话，那么stackTrace会在当前trace上继续增长</li>
<li>如果调用<code>fillInStackTrace()</code>,这将会覆盖原来的trace，而返回一个新的<code>Throwable</code>对象，该对象的trace起点就是当前位置</li>
</ul>
</li>
</ul>
</li>
<li><p>异常链</p>
<ul>
<li>在重新抛出异常时，如果希望把原始的异常信息保存下来。所有的Throwable子类在构造器中都可以接受一个<em>cause</em>对象作为参数。</li>
<li>在Throwable子类中，只有三种基本的异常类提供了带<em>cause</em>参数的构造器，它们是<code>Error</code>、<code>Exception</code>和<code>RuntimeException</code><ul>
<li>如果要把其他类型的异常链接起来，应该使用<code>initCause()</code>方法，而不是<em>cause</em>参数的构造器</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="12-7-Java标准异常"><a href="#12-7-Java标准异常" class="headerlink" title="12.7 Java标准异常"></a>12.7 Java标准异常</h2><ol>
<li><code>Throwable</code>表示任何可以被作为异常抛出的类<ul>
<li><code>Throwable</code>对象分为两种类型：<ul>
<li><code>Error</code>:编译错误或系统错误</li>
<li><code>Exception</code>:可以被抛出的基本类型</li>
</ul>
</li>
</ul>
</li>
<li>异常的基本概念就是用<strong>名称代表发生的问题</strong></li>
<li>特例：<code>RuntimeException</code>:<ul>
<li><code>NullPointerException</code>等运行时异常都是<code>RuntimeException</code>的子类，编译器不会强制对这些可能的异常进行异常说明，他们被称为<em>不受检查的异常</em></li>
<li><code>RuntimeException</code>类型的异常如果没有捕获，将会直达<code>main()</code>方法，在程序退出前调用<code>printStackTrace</code></li>
</ul>
</li>
</ol>
<h2 id="12-8-使用finally进行处理"><a href="#12-8-使用finally进行处理" class="headerlink" title="12.8 使用finally进行处理"></a>12.8 使用finally进行处理</h2><ol>
<li>finally语句：无论try块中是否发生异常，finally语句中的代码都将会执行<ul>
<li>可以实现类似<code>事务</code>的机制，一旦发生异常，在<code>finally</code>语句块中可以实现各个状态的<code>回滚</code></li>
</ul>
</li>
<li>当涉及到<code>break</code>、<code>continue</code>语句时,<code>finally</code>语句同样会被执行</li>
<li><code>return</code>之前，<code>finally</code>一样会被执行</li>
<li><p>缺憾：异常丢失</p>
<p> 使用<code>finally</code>语句后，异常可能会丢失</p>
<ul>
<li><p>前一个异常还没处理就抛出下一个异常，会造成前一个异常丢失</p>
<p><img src="http://ozv461xxi.bkt.clouddn.com/ThinkInJava-ch12.8-1.PNG" alt="ch12.8-1"></p>
</li>
<li><p><code>finally</code>中放入<code>return</code>也会丢失异常</p>
<p><img src="http://ozv461xxi.bkt.clouddn.com/ThinkInJava-ch12.8-2.PNG" alt="ch12.8-2"></p>
</li>
</ul>
</li>
</ol>
<h2 id="12-9-异常的限制"><a href="#12-9-异常的限制" class="headerlink" title="12.9 异常的限制"></a>12.9 异常的限制</h2><ol>
<li><p>当覆盖方法时，只能抛出基类方法的异常说明里列出的那些异常</p>
<p> 这样做的目的是当基类代码应用到其派生类对象时，一样能工作</p>
</li>
<li><p>派生类构造器的异常说明<strong>必须包含基类构造器的异常说明</strong>，可以多于基类构造器的异常说明列表</p>
</li>
<li><p>基类的普通方法有异常说明，继承类中覆盖的方法可以不写异常说明，因为这样在子类向上转型时，不会破坏对象的可替换性</p>
</li>
<li><p>子类中的重载方法，可以抛出父类方法中异常类的子异常类，同样不会破坏可替换性</p>
</li>
<li><p>不能基于异常说明来重载方法</p>
</li>
<li><p>在覆盖和继承中，基类的方法必须出现在派生类中；而在异常说明中，基类方法的异常说明不一定会出现在子类方法中。</p>
</li>
</ol>
<h2 id="12-10-构造器"><a href="#12-10-构造器" class="headerlink" title="12.10 构造器"></a>12.10 构造器</h2><ol>
<li><p>在设计异常时通常会有一个问题（三种选择）：</p>
<ul>
<li>把异常放在本层处理</li>
<li>把异常在本层处理一部分，再向上抛出相同异常</li>
<li><p>不做任何处理，直接向上抛出异常</p>
<p>如果用法恰当，直接向上抛出的确能简化编程</p>
</li>
</ul>
</li>
<li><p>构造阶段发生异常，最好的处理方式是嵌套的try-catch-finally:</p>
<p> <img src="http://ozv461xxi.bkt.clouddn.com/ThinkInJava-ch12.10-1.PNG" alt="ch12.10-1"></p>
<ul>
<li>如果<code>InputFile</code>对象构造失败，则不会进入内部的<code>try-catch</code>语句，不会调用<code>dispose()</code>方法；如果构造成功，则进入内部的<code>try-catch</code>语句，然后在内部的finally语句块中调用<code>dispose()</code></li>
</ul>
</li>
<li><p>在创建需要清理的对象之后，立即进入<code>try-finally</code>语句块</p>
<p> <img src="http://ozv461xxi.bkt.clouddn.com/ThinkInJava-ch12.10-2.PNG" alt="ch12.10-2"></p>
<ul>
<li>Section1: 在可去除对象之后紧跟<code>try-finally</code>的原则</li>
<li>Section2：为了构造和清理，具有不能失败的构造器的对象可以群组在一起</li>
<li>Section3：处理那些具有可能失败的构造器，且需要清理的对象。对于每一个构造，都必须包含在自己的<code>try-finally</code>语句块中</li>
</ul>
</li>
</ol>
<h2 id="12-11-异常捕获"><a href="#12-11-异常捕获" class="headerlink" title="12.11 异常捕获"></a>12.11 异常捕获</h2><ol>
<li>异常处理系统会按照代码的书写顺序找出“最近”的处理程序。找到匹配的处理程序后，它就认为异常将得到处理，就不再继续查找</li>
<li>查找的时候并不要求异常与异常处理程序所声明的异常完全匹配。派生类对象也可以匹配其基类的处理程序</li>
</ol>
<h2 id="12-12-其他可选方式"><a href="#12-12-其他可选方式" class="headerlink" title="12.12 其他可选方式"></a>12.12 其他可选方式</h2><ol>
<li>异常处理的一个重要原则是：“<strong>只有在你知道如何处理的情况下才捕获异常</strong>”</li>
<li>异常处理的重要目标是：<strong>将异常处理代码和异常发生的地点相分离</strong></li>
<li><p>历史</p>
<ul>
<li>受检查的异常：这种在编译时被强制检查的异常称为”受检查的异常”。即在方法的声明中声明的异常。</li>
<li><p>不受检查的异常：在方法的声明中没有声明，但在方法的运行过程中发生的各种异常被称为”不被检查的异常”。这种异常是错误，会被自动捕获。</p>
<p>缺点：</p>
</li>
<li>瞬时风格报告错误（C语言）：过多的执行条件测试，难以阅读</li>
<li><p>Java的“被检查的异常”：异常处理代码跟随着异常产生的代码，破坏了程序的正常思路</p>
<p>异常说明的含义：</p>
</li>
<li>我的代码会产生异常，这由你来处理</li>
<li>我的代码忽略了这些异常，这由你来处理</li>
</ul>
</li>
<li><p>观点</p>
<p> “被检查的异常”在小规模的程序中显得十分有效和清晰，但是一旦项目不断膨胀，过多的异常检查是的代码无法被管理</p>
<p> 异常检查的核心是：</p>
<ul>
<li>不在于编译器是否会强制程序员去处理错误，而是要有一致的、使用异常来报告错误的模型</li>
<li><p>不在于什么时候检查，而是一定要有类型检查。也就是说，必须强制程序使用正确的类型，至于强制施加于编译时还是运行时，倒没关系。</p>
<blockquote>
<p>比起在编译时指出所有的错误，<code>自动构建过程</code>和<code>单元测试</code>的效果更能发现这些错误</p>
</blockquote>
<p>反射和泛型就是用来补偿静态类型检查带来的过多限制</p>
<p>被检查的异常和不受检查的异常有什么区别？</p>
</li>
<li>A.被检查的异常应该用try-catch块代码处理，或者在main方法中用throws关键字让JRE了解程序可能抛出哪些异常。不受检查的异常在程序中不要求被处理或用throws语句告知。</li>
<li>B.Exception是所有被检查异常的基类，然而，RuntimeException是所有不受检查异常的基类。</li>
<li><p>C．被检查的异常适用于那些不是因程序引起的错误情况，比如：读取文件时文件不存在引发的FileNotFoundException。然而，不被检查的异常通常都是由于糟糕的编程引起的，比如：在对象引用时没有确保对象非空而引起的NullPointerException。</p>
<p>不受检查异常的基类RuntimeException.实际上在java中“不受检查的异常”是默认一定在程序中的，也就是说你不去声明使用它，它也会一直在被使用着。常见的RuntimeException异常包括：NullPointerException：见的最多了，其实很简单，一般都是在null对象上调用方法了。</p>
</li>
<li>NumberFormatException：字符串转换为数字时，例如 int i= Integer.parseInt(“ab3”);</li>
<li>ArrayIndexOutOfBoundsException: 数组越界，比如 int[] a=new int[3]; int b=a[3];</li>
<li>ClassCastException:类型转换错误，比如 Object obj=new Object(); String s=(String)obj;</li>
<li>ArithmeticException：算术错误，典型的就是0作为除数的时候。</li>
<li><p>IllegalArgumentException：非法参数，在把字符串转换成数字的时候经常出现的一个异常，我们可以在自己的程序中好好利用这个异常。</p>
<p>Java中所有异常或者错误都继承Throwable，我们把它分为三类：</p>
</li>
<li>Error:所有都继承自Error，表示致命的错误，比如内存不够，字节码不合法等。</li>
<li>Exception:这个属于应用程序级别的异常，这类异常必须捕捉。</li>
<li>RuntimeException:RuntimeException继承了Exception，而不是直接继Error,这个表示系统异常，比较严重。</li>
</ul>
</li>
<li><p>把异常传递给控制台</p>
<ul>
<li><p>不进行异常处理，直接在<code>main()</code>方法上声明<code>Exception</code>异常，就不必写<code>try-catch</code>语句了，不再进行异常检查了</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main <span class="keyword">throws</span> <span class="title">Exception</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ...<span class="comment">//some exceptions may throw</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>把“被检查的类型”转换为“不检查的类型”</p>
<ul>
<li><p>将“被检查的类型”包装进<code>RuntimeException</code>，这样既不会再进行异常检查，同时也不会把异常吞掉</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="comment">//... do somethin</span></span><br><span class="line">&#125;<span class="keyword">catch</span>(IDoNotKnowWhatToDoWithThisCheckedException e)&#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h2 id="12-13-异常使用指南"><a href="#12-13-异常使用指南" class="headerlink" title="12.13 异常使用指南"></a>12.13 异常使用指南</h2><p>   <img src="http://ozv461xxi.bkt.clouddn.com/ThinkInJava-ch12.13-1.PNG" alt="ch12.13-1"></p>

        </div>

        <blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2017-12-17T09:12:40.094Z" itemprop="dateUpdated">2017-12-17 17:12:40</time>
</span><br>


        
        No one can guide you, except yourself!     self-link：<a href="/2017/12/15/Thinking-in-Java-第十二章-通过异常处理错误/" target="_blank" rel="external">http://matlabchina.cn/2017/12/15/Thinking-in-Java-第十二章-通过异常处理错误/</a>
        
    </div>
    <footer>
        <a href="http://matlabchina.cn">
            <img src="/img/logo.jpg" alt="Quincey Svng">
            Quincey Svng
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ThinkingInJava/">ThinkingInJava</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://matlabchina.cn/2017/12/15/Thinking-in-Java-第十二章-通过异常处理错误/&title=《Thinking in Java 第十二章 通过异常处理错误》 — Quincey&pic=http://matlabchina.cn/img/logo.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://matlabchina.cn/2017/12/15/Thinking-in-Java-第十二章-通过异常处理错误/&title=《Thinking in Java 第十二章 通过异常处理错误》 — Quincey&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://matlabchina.cn/2017/12/15/Thinking-in-Java-第十二章-通过异常处理错误/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Thinking in Java 第十二章 通过异常处理错误》 — Quincey&url=http://matlabchina.cn/2017/12/15/Thinking-in-Java-第十二章-通过异常处理错误/&via=http://matlabchina.cn" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://matlabchina.cn/2017/12/15/Thinking-in-Java-第十二章-通过异常处理错误/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2017/12/18/Thinking-in-Java-第十三章-字符串/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Thinking in Java 第十三章 字符串</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2017/12/14/Thinking-in-Java-第十一章-持有对象/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Thinking in Java 第十一章 持有对象</h4>
      </a>
    </div>
  
</nav>



    








<section class="comments" id="comments">
    <div id="gitment_thread"></div>
    <link rel="stylesheet" href="//unpkg.com/gitment/style/default.css">
    <script src="//unpkg.com/gitment/dist/gitment.browser.js"></script>
    <script>
        var gitment = new Gitment({
            owner: 'SuperFireFoxy',
            repo: 'superfirefoxy.github.io',
            oauth: {
                client_id: 'f79ac80faa3d2c58bf61',
                client_secret: '655a9b1df478169a0c1f83cc4cc6b537873db4e3',
            },
        })
        gitment.render('comments')
    </script>
</section>







</article>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>This blog is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Quincey Svng &copy; 2017 - 2018</span>
            <span>
                
                <a href="http://www.miitbeian.gov.cn/" target="_blank">蜀ICP备16009264号-1</a><br>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://matlabchina.cn/2017/12/15/Thinking-in-Java-第十二章-通过异常处理错误/&title=《Thinking in Java 第十二章 通过异常处理错误》 — Quincey&pic=http://matlabchina.cn/img/logo.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://matlabchina.cn/2017/12/15/Thinking-in-Java-第十二章-通过异常处理错误/&title=《Thinking in Java 第十二章 通过异常处理错误》 — Quincey&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://matlabchina.cn/2017/12/15/Thinking-in-Java-第十二章-通过异常处理错误/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Thinking in Java 第十二章 通过异常处理错误》 — Quincey&url=http://matlabchina.cn/2017/12/15/Thinking-in-Java-第十二章-通过异常处理错误/&via=http://matlabchina.cn" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://matlabchina.cn/2017/12/15/Thinking-in-Java-第十二章-通过异常处理错误/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPYAAAD2CAAAAADAeSUUAAADHElEQVR42u3aQW7jQAwEwPz/015gTwGyEdjkCGvRpZMhO9KUdOiQnK+v8vH6e3z//PPMz2+/n+9d8/ouPz8fPrCxsbEfwn5dHin7jiWm97q2YGNjY29l9252HVTXv5nnbeUF/HoeGxsb+yPZaZnRK1rSh4iNjY2N3QuwSsnRA/ceLjY2NjZ2palU+fZUw6hX5NzSS8PGxsZ+e/Z8ce/z+fb5NjY2NvabsV+DI73OZLR8HWnxyrGxsbEXsXuFRH1wW99eMx8w1xtM2NjY2JvYkyhK8eljnQwhSrmNjY2NvYI92QpTD6de5PTKkiDMsLGxsdexeyVHrxlUWfRkm871C8DGxsbex64Pd+dN//njODWiwMbGxt7Bng9667ev/yaYbJR/f3i+jY2Njf1m7HmbfhJ+6SOoFzC/Xg0bGxt7Hbu3RSZuxx/auNN7ZM2+FDY2Nvaj2Onmm0ks9cYPvZbTP85jY2NjL2Kng9I0C+ahWG8Vpe0nbGxs7B3sHm8eLWlonXrco7eKjY2N/fbsdKHzplKdeqqwwcbGxt7Kvl5Eb/TbbNyXC5I6PuilYWNjYz+QXQmY+hg4DbO0GVQnVQYY2NjY2FvZKbIXeOmAuV72NB8xNjY29gp2HZPGT327TzpySGO1NCrAxsbGfhS73rJJC4ZJjPVaXUE0YmNjY69mV/7RT5ebtp/ubjNhY2Nj72ant6mHX+X66bi3tzZsbGzsTezeuDQFT+KnAk4fHDY2NvY+dv2iKTItSybjiuYYGBsbG/sD2PURwhzcC7B0bICNjY29lZ0WD2mcpEVFr6RJhxbY2NjY+9jpP/eTjTv1AEsZvTIGGxsb++ns+UaZSUEyb0KlLw8bGxt7B/sVHpP4qbfs6w+0/jKwsbGxt7LTADj7+/rS021DpxTY2NjYT2GnkZPGRtoMql8tHQBgY2Nj72ZXAiYdAPTONLtip7po2NjY2B/Arv9VL/B6m4HiF4ONjY39kez5tshe8dMrlo4FGDY2NvZD2L2F1r9Nm0dp0VJZFTY2NvZW9n2D23SIm76MdIvPLfNtbGxs7P/J/gNkuNSYEuO5lQAAAABJRU5ErkJggg==" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: false };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>



<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" async></script>




<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
